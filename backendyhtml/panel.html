<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Panel de administracion</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Encode+Sans:wght@100&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="navmenu.js">
  <link rel="stylesheet" type="text/css" href="index.css">
	<!-- Libraries -->
	<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">

  </head>
  <body>

    <header>
      <input type="checkbox" id="btn-menu" />
      <label for="btn-menu"><i class="fa fa-bars" ></i></label>
      <nav class="menu">
        <ul>
        <li><a class="dropdown-item" href="index.html">T-SHIRT SHOP</a></li>
        <li><a class="dropdown-item" href="index.html">Inicio</a></li>
        <li><a class="dropdown-item" href="login.html">Login</a></li>

        <li class="submenu"><a class="dropdown-item" href="#">Categorias<i class="fa fa-caret-down"></i></a>
          <ul>
              <li><a href="camisetas.html">Camisetas</a></li>
            </ul>
        </li>
        
        <li class="submenu"><a class="dropdown-item" class="marca"  href="#">Panel - admin<i class="fa fa-caret-down"></i></a>
          <ul>
            <li class="submenu"><a class="dropdown-item" href="#">Productos</a></li>
            <li class="submenu"><a class="dropdown-item" href="panelcate.html">Categorias</a></li>
            <li class="submenu"><a class="dropdown-item" href="#">Usuarios</a></li>
      </nav>
    </header>

    <br>
    <div class="fondo_p">
      <div class="container "><!--Agregado por mi cuenta-->
      </div>
  
    <br>
    <h1>Panel de administracion - Acceso Admin</h1>
    <br>

    <div clas="row">
        <div class="col-3">
          <a href="crearproducto.html">Crear producto</a>
        </div>
        <br>
        <div class="col-9">
            <div class="container">
            <div class="row">
                <div>
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                          <thead class="table-light">
                            <tr>
                                <th scope="col">Id categoria</th>
                                <th scope="col">Producto</th>
                                <th scope="col">Precio</th>
                                <th scope="col">Opciones</th>
                            </tr>
                          </thead>
                          <tbody id="tablas">

                            <tr class="align-bottom">
                            </tr>
                            <tr>
                              <td class="align-top">This cell is aligned to the top.</td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                </div>
            </div>
        </div>

    <script>

    function eliminar(id){
      if(confirm("Desea eliminar la camiseta?")){
      console.log("Eliminar el id..."+id)
      let options = {
        method : "DELETE"
      }
      fetch("http://localhost:9011/productos/"+id,options)
      .then(response => response.json())
      .then(data => { if(data.msj =="ok"){
        alert("Producto eliminado con exito")
        listar()
                      }
          }   )
        }
    }

    function listar(){
        console.log("Hola mundo")
    fetch("http://localhost:9011/productos")
    .then(response => response.json())
    .then(data => {console.log(data)
    let codigo = ""
    data.forEach(element => {
       //codigo +=  ' <div class="table-responsive">'
        //codigo += ' <table class="table align-middle">'
       // codigo += ' <thead>'
        codigo += ' <tr>'
        codigo += ' <th scope="row">'+ element.id +'</th>'
        codigo += ' <td>'+ element.nombre+'</td>'
        codigo += ' <td>'+ element.precio+'</td>'
        codigo += ' <td><a href="editarproducto.html?id='+element.id+'"><button class="btn btn-light" button>Editar</a></button><button class="btn btn-secondary btn-sm" button onClick="eliminar('+element.id+')">Eliminar</button></td>'
        //codigo += ' <td>@mdo</td>'
        codigo += ' </tr>'
       // codigo += ' </thead>'
       // codigo += ' </table>'
       // codigo += ' </div>'

      });
      document.getElementById('tablas').innerHTML = codigo
    })
  }
  listar()
  
 </script>

<div class="fondo_q">
  <div class="container"><!--Agregado por mi cuenta-->
  </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>

</html>